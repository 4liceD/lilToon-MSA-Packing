# lilToon
Version 1.0

# 概要
Unity用に開発したトゥーンシェーダーです。  
Unity標準の全ライティングに対応し、モデルの見た目を損なわずにStandard Shaderに近い明るさになるように調整しています。

対応Unityバージョン
- Unity 2017 - Unity 2021.1

対応シェーダーモデル
- 通常版: SM4.0・ES3.0以降
- 軽量版: SM3.0・ES2.0以降
- ファーシェーダー: SM4.0・ES3.1+AEP・ES3.2以降
- テッセレーション: SM5.0・ES3.1+AEP・ES3.2以降

対応レンダリングパイプライン
- Built-in Render Pipeline (BRP)
- Lightweight Render Pipeline (LWRP)
- Universal Render Pipeline (URP)
- 屈折シェーダーはBRPのみ対応

# 主な特徴
アバターを用いたサービス向けに開発したシェーダーで以下のような特徴があります。
- Unity標準の全ライティング対応 (明るさの計算はStandard Shaderにほぼ合わせています)
- 幅広いサポート環境 (Unity2017～2021、BRP/LWRP/URP)
- 白飛びを防ぐライト合成
- 色調補正機能による簡単色替え
- マテリアルごとの表示非表示切り替え (同一メッシュでも部分的に非表示にできます)
- プリセットでワンクリック設定
- メインカラーで最大3レイヤーを合成、サブレイヤーはGIFアニメーションにも対応
- トゥーン向け機能 (輪郭線、カスタムシャドウ、リムライト、マットキャップ、ステンシル)
- フォトリアル向け機能 (ノーマルマップ、スムースネス、メタリック、エミッション)
- ほぼ全テクスチャでUVスクロール＆回転可能
- パララックス対応エミッションx2レイヤー
- 暗い空間かつわずかに明かりがあるときに光る疑似蛍光 (瞳を光らせる用途などにおすすめ)
- ファー、屈折、テッセレーション

# ライセンス
MIT Licenseで公開しています。同梱のLICENSEをご確認ください。また販売物、配布物への同梱可能です。

# 使い方 - 新規セットアップ
1. unitypackageをUnityウィンドウにドラッグ＆ドロップでインポート
2. Projectからマテリアルを選択
3. Inspector上部の"Shader"から"lilToon"を選択
4. テクスチャが反映されていない場合は"メインカラー"にテクスチャを設定
5. テクスチャを透過する場合は"Rendering Mode(透過モード)"を"Cutout"または"Transparent"に変更

|透過モード|説明|
|-|-|
|不透明|透過を無視します。|
|透明・不透明|透過を利用しますが半透明の描画はできません。|
|半透明|透過を利用します。半透明のオブジェクト同士が重なると片方が見えなくなる場合があります。|

# よくあるトラブル
- 顔にかかる影が気になる  
  → "マスクと強度"にマスクテクスチャを指定することで部分的に影を消すことができます。
- 輪郭線が汚くなる  
  → "マスクと太さ"にマスクテクスチャを指定することで部分的に輪郭線を消したり太さを調整したりすることができます。

# シェーダー外のおすすめ設定
以下の設定で顔など一部分だけ明るさが違う現象を緩和できます。また、テクスチャの透過が綺麗になります。
- Hierarchyからメッシュを選択し、"Root Bone"、"Bounds"、"Anchor Override"の設定を統一、"Recieve Shadows"をオフにする
- Projectから透過テクスチャを選択し、Inspectorから"Alpha Is Transparency"にチェックを入れる
- Cutoutマテリアルに使われるテクスチャは"Mip Maps Preserve Coverage"にチェックを入れる

# Liteバージョンについて
通常版の見た目をある程度維持しつつ大幅に軽量化したものです。人が多く集まり負荷が気になる状況やアバター展示、モバイル環境等におすすめです。Lite版から直接マテリアルを設定せず、通常版で作成したものを変換するとより直感的にマテリアル設定が可能です。

# 変更履歴
## v1.0
- 公開開始