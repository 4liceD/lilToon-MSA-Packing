# マニュアル

# 目次
- [登場する用語](#anchor0)
- [基本設定](#anchor1)
- [色設定](#anchor2)
    - [基本色設定](#anchor2-1)
    - [影設定](#anchor2-2)
    - [輪郭線設定](#anchor2-3)
    - [発光設定](#anchor2-4)
- [ノーマルマップ・光沢設定](#anchor3)
    - [ノーマルマップ設定](#anchor3-1)
    - [光沢設定](#anchor3-2)
        - [反射](#anchor3-2-1)
        - [マットキャップ](#anchor3-2-2)
        - [リムライト](#anchor3-2-3)
- [拡張設定](#anchor4)
    - [視差マップ](#anchor4-1)
    - [ステンシル設定](#anchor4-2)
    - [レンダリング設定](#anchor4-3)
    - [テッセレーション](#anchor4-4)
    - [屈折設定](#anchor4-5)
    - [ファー設定](#anchor4-6)
- [最適化](#anchor5)

<br/>
<a id="anchor0"></a>

# 登場する用語
|名前|説明|
|-|-|
|マテリアル|ものの見え方を決めるデータです。|
|テクスチャ|画像のことです。ものの色を決めるときなど、様々なことに使われます。|
|UV|テクスチャを貼る位置を決めるデータです。|
|マスク|処理を行う部分を指定するために使われるテクスチャです。|
|ノーマルマップ|表面に凹凸があるように見せかけるテクスチャです。影や光沢の出方に影響します。|
|マットキャップ|光の反射を描き込んだテクスチャです。|
|リムライト|逆光のように光が周り込み、ものの輪郭だけ明るくなるライトです。|
|ステンシル|画面上で行われるマスク表現です。髪の上に眉毛を描画するなどの表現ができます。|

<br/>
<a id="anchor1"></a>

# 基本設定
|名前|説明|
|-|-|
|非表示|オンのときはマテリアルが非表示になります。|
|透過モード|透過設定を変更できます。|
|Cutoff|透明度がこの数値以下になると完全透明になります。|
|ZWrite|奥行き情報を書き込むかどうか。普通はオンですが、半透明ではオフにすると良い場合もあります。|
|UV設定|TilingはUVのループ数、Offsetはずらし量です。|
|UVアニメーション|UVの移動や回転の速度です。|

<details><summary>透過モード一覧</summary>

|透過モード|説明|
|-|-|
|不透明|透過を無視します。|
|透明・不透明|透過を利用しますが半透明の描画はできません。|
|半透明|透過を利用します。半透明のオブジェクト同士が重なると片方が見えなくなる場合があります。|
|屈折|[高負荷] 透けている部分が歪んで見えるようになります。|
|屈折ぼかし|[高負荷] 屈折表現に加えすりガラスのようなぼかしも行えます。|
|ファー|[高負荷] 毛のような表現ができます。スポットライトに照らされる環境下では他マテリアルと違う明るさになります。|
|ファー (カットアウト)|[高負荷] 毛のような表現ができます。明るさの問題はありませんが、見た目が荒くなります。|
</details>

<br/>
<a id="anchor2"></a>

# 色設定

<a id="anchor2-1"></a>

## 基本色設定
### メインカラー
|名前|説明|
|-|-|
|テクスチャ|テクスチャを指定します。右のカラーピッカーで色を決めることもできます。|
|アルファマスクを焼き込み|テクスチャに透明度を指定したマスクを適用できます。|
|色相|色合いです。|
|彩度|色の鮮やかさです。|
|明度|色の明るさです。|
|ガンマ|コントラストを強調します。|
|焼き込み|色調補正したテクスチャを書き出します。|

### メインカラー2nd・3rd
|名前|説明|
|-|-|
|テクスチャ|テクスチャを指定します。Gif画像を指定し"Convert Gif"を押すことでアニメーションさせることもできます。|
|デカール化|オンのときはレイヤーをデカールとして利用します。|
|マスク|マスクで指定した部分だけレイヤーを合成できます。|
|合成モード|レイヤーの合成方法です。通常、加算、スクリーン、乗算が選択できます。|
|焼き込み|レイヤーを1枚のテクスチャに統合します。|

<details><summary>通常時のパラメーター</summary>

|名前|説明|
|-|-|
|Tiling|テクスチャのループ数です。|
|Offset|テクスチャのずらし量です。|
|角度|テクスチャの角度です。|
</details>

<details><summary>デカール時のパラメーター</summary>

|名前|説明|
|-|-|
|ミラーモード|デカールを反転させたり片側だけ表示させたりすることができます。UVが片側しかないもの向けの設定です。|
|複製モード|デカールを反転させたり片側だけ表示させたりすることができます。UVが左右対称のもの向けの設定です。|
|X・Y座標|デカールの位置です。|
|X・Y軸サイズ|デカールの大きさです。|
|角度|デカールの角度です。|
|-|-|
|X・Y方向の枚数|それぞれの軸に並べられたコマの枚数です。|
|フレーム数|合計の枚数です。|
|FPS|再生速度です。|
|X・Y軸比率|並べられたテクスチャの右や下に空白がある場合に設定する空白の比率です。|
|境界を調整|他のコマが上下左右にはみ出す場合に数値を上げると改善されます。|
</details>

<br/>
<a id="anchor2-2"></a>

## 影設定
|名前|説明|
|-|-|
|AOと影範囲|影になる範囲です。AO(陰影)テクスチャを指定すると暗い部分ほど影が出やすくなります。|
|ぼかし|影のぼかし量です。マスクを指定すると部分的にぼかし量を変更できます。|
|マスクと強度|影の強さです。マスクを指定すると黒く塗った部分に影が出なくなります。|
|影色1・2|影の色です。テクスチャを指定して色を上書きすることもできます。影色2の透明度を上げると影の中に影を追加できます。|
|メインカラーの強度|メインカラーを乗算して影の色を強調することができます。|
|環境光の強さ|周囲の光が影の色に影響する強さです。|
|境界の色|影をぼかした際に境界に色を乗せます。|
|境界の幅|境界の色を乗せる範囲を広くします。|
|影を受け取る|他オブジェクトから影を受け取ります。屋根がある空間で違和感が出ることがあり、オフにしたほうが良い場合が多いです。|

<br/>
<a id="anchor2-3"></a>

## 輪郭線設定
|名前|説明|
|-|-|
|色|輪郭線の色です。|
|メインカラーを使用|輪郭線にメインカラーを適用します。|
|メインカラーの強度|乗算でメインカラーを強調する度合いです。|
|マスクと太さ|輪郭線の太さです。マスクを指定すると黒く塗った部分に輪郭線が出なくなります。|

<br/>
<a id="anchor2-4"></a>

## 発光設定
|名前|説明|
|-|-|
|色|発光の色です。横の三角マークからUVを設定できます。|
|マスク|発光させる場所や強さを指定します。横の三角マークからUVを設定できます。|
|点滅の強さ|点滅させる強さです。|
|点滅タイプ|オフではなめらかに、オンでははっきりと点滅します。|
|点滅の速度|点滅の速度です。|
|点滅のズレ|点滅のタイミングをずらします。|
|グラデーション|グラデーションを指定して色を時間変化させることができます。|
|視差の強さ|見る角度に応じてUVをずらします。|
|疑似蛍光|ライトが暗いときのみ光るようになりますが、完全に光のない空間では光りません。暗い部屋で目を明るく見せる場合などにおすすめです。|

<br/>
<a id="anchor3"></a>

# ノーマルマップ・光沢設定

<a id="anchor3-1"></a>

## ノーマルマップ設定
|名前|説明|
|-|-|
|ノーマルマップ|ノーマルマップを指定します。|
|マスク|ノーマルマップを適用する部分と強さを指定します。|

<br/>
<a id="anchor3-2"></a>

## 光沢設定
<a id="anchor3-2-1"></a>
### 反射
|名前|説明|
|-|-|
|滑らかさ|表面の滑らかさです。数値を下げるほど反射が柔らかくなります。|
|金属度|金属っぽさです。|
|色|反射の色です。|
|光沢のタイプ|ライトを反射させる見た目です。|
|環境光の反射|周りの色を反射させます。|

<a id="anchor3-2-2"></a>
### マットキャップ
|名前|説明|
|-|-|
|マットキャップ|マットキャップを指定します。|
|マスク|マットキャップを適用する部分を指定します。|
|ライティングを合成|マットキャップにライトの明るさを適用します。|
|合成モード|マットキャップの合成方法です。通常、加算、スクリーン、乗算が選択できます。|

<a id="anchor3-2-3"></a>
### リムライト
|名前|説明|
|-|-|
|色|リムライトの色です。|
|範囲|リムライトで光らせる範囲です。|
|ぼかし|リムライトのぼかし量です。|
|リムライトの細さ|リムライトの細さです。|
|ライティングを合成|リムライトにライトの明るさを適用します。|
|影部分で無効化|影の部分でリムライトを消すようになります。|

<br/>
<a id="anchor4"></a>

# 拡張設定

<a id="anchor4-1"></a>

## 視差マップ
|名前|説明|
|-|-|
|視差マップ|視差マップとその強度です。|
|オフセット|視差マップの基準となる値です。|

<br/>
<a id="anchor4-2"></a>

## ステンシル設定
複雑で理解が困難な場合、以下のように理解すると問題なく使えます。

    例: 眉毛を髪の上から描画したい場合
    眉毛のマテリアルでSet Writer、髪のマテリアルでSet Readerを押す
    眉毛と髪のRefの数値を合わせる

|名前|説明|
|-|-|
|Ref|ステンシル処理に使われるIDです。IDを元に描画する・しないを決定します。|
|Comp|IDの比較の方法です。この条件を満たすときに描画されます。|
|Pass|描画するときにIDを書き換えるかどうかの設定です。|
|Fail|描画されないときにIDを書き換えるかどうかの設定です。|
|ZFail|手前にものがあって描画されないが、Compの条件を満たす場合にIDを書き換えるかどうかの設定。|
|Set Writer|ステンシルを書き込む側の設定にします。|
|Set Reader|ステンシルを読み込む側の設定にします。|
|Reset|ステンシルの設定を初期化し、ステンシルを行わない状態に戻します。|

<br/>
<a id="anchor4-3"></a>

## レンダリング設定
通常は変更しない複雑な設定項目です。無視して問題ありません。
|名前|説明|
|-|-|
|シェーダーの種類|通常版と軽量版を選択できます。|
|ZWrite|奥行き情報を書き込むかどうか。数値は奥ほど大きく、手前ほど小さくなります。|
|ZTest|奥行き情報の比較方法です。この条件を満たすときに描画されます。|
|SrcBlend|シェーダーで計算された色に乗算する数値。|
|DstBlend|すでに画面にある色に乗算する数値。|
|BlendOp|数値の合成方法。Add以外にするとSrcBlendとDstBlendは無視されます。|
|ForwardAdd*|追加のライトの合成時のみ使われる上記3つの設定です。|
|Enable GPU Instancing|GPU Instancingを行うかどうか。|
|Render Queue|マテリアルを描画する順序を決める際に使われる数値です。大きいほど後に描画されます。|

<br/>
<a id="anchor4-4"></a>

## テッセレーション
近づいた際にモデルをなめらかにする実験的な機能です。ハイポリのモデルでは負荷が非常に高くなるので、ローポリのモデルをなめらかに見せたい場合などに限って使うと良いでしょう。
|名前|説明|
|-|-|
|閾値|この数値以上に辺が長くなったらポリゴンを分割します。|
|強度|なめらかにする処理の強さです。|
|縮小補正|縮小する量です。なめらかにする際にモデルが大きく見えるようになるため、それを補うためのものです。|
|最大分割数|辺の最大分割数です。数値が大きいほど細かく分割されるため、負荷がかかりやすくなります。|

<br/>
<a id="anchor4-5"></a>

## 屈折設定
|名前|説明|
|-|-|
|屈折の強さ|奥にあるものを歪ませる強さです。|
|フレネル|角度に応じた歪みやすさです。|
|メインカラーから色を取得|メインカラーを屈折の色に適用します。|
|色|屈折の色です。|

<br/>
<a id="anchor4-6"></a>

## ファー設定
|名前|説明|
|-|-|
|ノーマルマップ|ここで指定したノーマルマップをファーの向きとして利用できます。|
|向き|ファーの向きです。|
|長さ|ファーの長さです。|
|VertexColor -> Vector|頂点カラーをファーの向きとして利用します。|
|重力|重力によってファーが下を向く強さです。|
|ノイズ|ファーの生成に使われるノイズテクスチャです。|
|Tiling|ノイズの細かさ、つまり毛の細かさです。|
|Offset|ノイズテクスチャのずらし量です。|
|マスク|マスクを指定すると黒く塗った部分でファーが無効化されます。|
|陰影|ファーに陰影を適用する度合いです。|
|レイヤー数|ファーを生成する量です。数値を上げるほど密度が高くなりますが、負荷も高くなります。|

<br/>
<a id="anchor5"></a>

# 最適化
|名前|説明|
|-|-|
|全て焼き込み|メインカラーと色調補正、レイヤー2&3を統合して1枚のテクスチャにします。負荷を軽減しつつ他シェーダーに変更した際の見た目の変化を抑えることができます。|
|色調補正を焼き込み|色調補正したテクスチャを書き出します。他シェーダーに変更した際の見た目の変化を抑えることができます。|
|レイヤー2を焼き込み|メインカラーとレイヤー2を1枚のテクスチャに統合します。|
|レイヤー3を焼き込み|メインカラーとレイヤー3を1枚のテクスチャに統合します。|
|未使用のテクスチャを外す|マテリアルから使われていないテクスチャを外します。|
|lilToonLiteに変換|マテリアルを軽量版のlilToonLite用に変換します。|
|MToon(VRM)に変換|マテリアルをVRMで使われるMToon用に変換します。|